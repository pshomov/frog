<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
    <title>Check status</title>
    <script type="text/javascript" src="../Scripts/jquery-1.4.4.js"></script>
    <script type="text/javascript" language="javascript">
        $(
            function() {
                setInterval("update_status()", 5000);
                update_status();
            }
        );

        function update_status() {
            $.get("../status/index", function data(msg) {
                switch (msg.status.Current) {
                    case 0: set_status("Build started", "yellow");
                        break;
                    case 1: set_status("Not started", "gray");
                        break;
                    case 2: set_status("Build complete", msg.status.Completion == 1 ? "green" : "red");
                        break;
                    case 3: set_status("Task '"+msg.status.TaskName+"' started", "yellow");
                        break;
                    case 4: set_status("Task '" + msg.status.TaskName + "' ended", msg.status.Completion == 1 ? "green" : "red");
                        break;
                    default:
                        set_status("Unknown build status", "cyan");
                }
            });
        }
        function set_status(msg, color) {
            $("#status").text(msg);
            $("body").attr("style", "background : " + color + ";");
        } 
    </script>
    </head>
    <body>
        <div id="status"></div>
    </body>
</html>